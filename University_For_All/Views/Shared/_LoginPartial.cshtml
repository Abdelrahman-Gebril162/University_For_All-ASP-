@using Microsoft.AspNet.Identity
@using University_For_All.Models

@{
    var db = new ApplicationDbContext();
    var student = db.Student.SingleOrDefault(s => s.st_email == User.Identity.Name);
    string profile="";
    if (student!=null)
    {
       profile = string.Join("_", student.st_fname, student.st_lname) + " Profile";
    }

}
@if (Request.IsAuthenticated)
{
    using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm", @class = "navbar-right" }))
    {
    @Html.AntiForgeryToken()

        <ul class="nav navbar-nav navbar-right">
            <li>
                <img style="width: 50px; height: 50px;border-radius: 50%"src="@Url.Content(student.st_picture)" alt="@student.st_lname image"/>
            </li>
            <li>
                @Html.ActionLink(profile, "Index", "Manage", new {id = @student.id}, htmlAttributes: new {title = "Profile"})
            </li>
            <li><a href="javascript:document.getElementById('logoutForm').submit()">Log off</a></li>
        </ul>
    }
}
else
{
    <ul class="nav navbar-nav navbar-right">
        <li>@Html.ActionLink("Register", "Register", "Account", routeValues: null, htmlAttributes: new { id = "registerLink" })</li>
        <li>@Html.ActionLink("Log in", "Login", "Account", routeValues: null, htmlAttributes: new { id = "loginLink" })</li>
    </ul>
}
